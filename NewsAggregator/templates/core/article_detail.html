{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-md-8 offset-md-2">
        <article>
            <h1>{{ article.title }}</h1>
            <div class="text-muted mb-3">
                <span>{{ article.source.name }}</span> - 
                <span>{{ article.publication_date|date:"M d, Y H:i" }}</span>
            </div>
            
            <div class="content-area mb-4">
                {{ article.processed_content|linebreaks }}
            </div>
            
            <div class="alert alert-secondary summary-box" style="display: none;">
                <h4>Summary</h4>
                <div class="summary-content"></div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-outline-primary summarize-btn" data-id="{{ article.id }}">
                    Show Summary
                </button>
                <div class="dropdown">
                    <button class="btn btn-outline-info dropdown-toggle" type="button" data-bs-toggle="dropdown">
                        Translate
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item translate-btn" href="
                        <li><a class="dropdown-item translate-btn" href="
                    </ul>
                </div>
            </div>
        </article>
    </div>
</div>

<div class="card mt-4">
    <div class="card-header">
        <div class="d-flex justify-content-between align-items-center">
            <h3>Article Actions</h3>
            <div>
                <a href="{% url 'generate_summary' article.id %}" class="btn btn-primary">Generate Summary</a>
                <a href="{% url 'detect_fake_news' article.id %}" class="btn btn-warning">Detect Fake News</a>
            </div>
        </div>
    </div>
</div>

{% if article.article_summary %}
<div class="card mt-4">
    <div class="card-header">
        <h3>Summary</h3>
    </div>
    <div class="card-body">
        <p>{{ article.article_summary }}</p>
    </div>
</div>
{% endif %}

{% if article.is_fake_news is not None %}
<div class="card mt-4">
    <div class="card-header">
        <h3>Fake News Detection</h3>
    </div>
    <div class="card-body">
        <div class="alert {% if article.is_fake_news %}alert-danger{% else %}alert-success{% endif %}">
            <h4>
                {% if article.is_fake_news %}
                    This article might contain fake news ({{ article.fake_news_confidence|floatformat:2 }}% confidence)
                {% else %}
                    This article appears to be reliable ({{ article.fake_news_confidence|floatformat:2 }}% confidence)
                {% endif %}
            </h4>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
